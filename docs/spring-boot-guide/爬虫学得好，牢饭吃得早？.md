# 爬虫学得好，牢饭吃得早？

网络爬虫(web crawler 简称爬虫)就是按照一定规则从互联网上抓取信息的程序，既然是程序，那和正常用户访问页面有何区别？爬虫与用户正常访问信息的区别就在于：用户是缓慢、少量的获取信息，而爬虫是大量的获取信息。

## 一、案件1

2021年6月3号，河南省的一家法院宣判了一个关于爬虫的案子：

- 两名犯罪分子（一个老板，一个程序员）爬取了淘宝**近11亿8千万条**数据。
    
- 数据涉及到**用户uid**，**淘宝昵称**，**用户手机号**等敏感信息。
    
- 两人都以**侵犯公民信息罪**分别被判处**3年6个月**，**3年3个月**。
    
判决书如下所示：
![](https://img-blog.csdnimg.cn/img_convert/888ba74fe3fc9af4991a8ec837aec588.png)

来看一下整个案件的过程：

- 黎某2018年1月15日成立了浏阳市泰创网络科技有限公司。
- **逯某**受雇于这家公司，月薪是1万元。
- 2020年8月14日，淘宝报警称：有人通过淘宝数据接口，在7月6日至7月13日，平均每天爬取500万次，共爬取3500万条数据。
- 警方介入调查后，发现逯某电脑上确有 11.8 亿条数据。逯某供述：他从2019年11月开始用自己研发的爬虫爬取淘宝数据，共爬取5000万条。他电脑上的11.8亿条数据中，很多是从其他地方下载的。
- 2021年6月3号，一审以侵犯公民信息罪分别判决老板和程序员3年6个月，3年3个月。
    


来看一下他们的商业模式：

- 这家公司是一家**淘宝客**公司。
- 淘宝客的商业模式就是**把淘宝上的商品链接推广给用户**，只要有人点击推广链接产生购买就可以**获得佣金**。
- 逯某通过爬虫抓取**用户信息**，交给黎某，黎某把商品链接推广给这些用户，希望产生购买。
    

淘宝客本身肯定是不违法的，但现在赚钱要靠信任，要靠影响力。比如直播也是一种信任和影响力。单纯靠暴力获取数据，简单粗暴的发消息推广已经行不通了。并且通过不正当途径获取用户个人信息是违法的。


淘宝的难爬是出了名的。怎么月薪一万的程序员就这么轻松的每天爬取500万条数据呢？

逯某的交代是这样的：
- 通过淘宝商品详细信息接口和淘宝信息分享接口，可以爬取淘宝客户的淘宝数字ID和淘宝昵称
- 通过淘宝分享接口可以爬取淘宝客户手机号信息。
    

网上有些文章直接指责淘宝：这听起来实在太奇葩了，淘宝竟然对自己用户的数据不设防？

淘宝作为国内顶尖的电商平台，聚集了最顶尖的人才。安全性上它们肯定是考虑到的，也肯定做了数据安全上的防范。那么问题怎么出现的呢？

分析原因：这可能是一个**跨部门协调过程中出现的漏洞**，属于系统论的问题！

我们来看几个要点
- 淘宝详细信息接口，和淘宝分享接口从微服务的角度一定属于不同的微服务，简单说是不同的团队开发的。
- 淘宝详细接口：并没有提供手机号等私密信息，所以他们认为接口没问题。
- 淘宝分享接口：只有通过数字ID才能获取手机号码，但别人不应该有那么多数字ID，所以他们认为也没问题。 
- 这两个部门可能不会相互沟通，连在一起看数据风险。
    

而聪明的逯某就把二者连在了一起，比较轻松的抓取了大量数据。当然他肯定也应用了 IP 代理等技术防止被封IP。

淘宝的安全人员不承认他们的接口有漏洞，他认为逯某是通过破解接口的形式进行加密数据的爬取。

如果是**破解接口**，那属于**破坏计算机信息系统罪**，但最终法院判处的是：**侵犯公民信息罪**。

这说明几个点：
- 爬虫本身肯定是不违法的，就算你使用了一定的技术手段加快抓取，防止被封等也问题不大。
- 本案中违法的是抓取了**公民的敏感信息**！这是爬虫的红线之一。
- 适当抓取不违法，但是抓取过程中造成了对方系统故障，就属于**破坏计算机信息系统罪**。
    

所以我们再来看一下和爬虫最相关的两个罪：
- 侵犯公民信息罪
- 破坏计算机信息系统罪
    

如果老板黎某或者逯某懂得这些法律，我想他们不至于为了这点利润铤而走险，最后陷入牢狱之灾。

两个犯罪分子入狱了，相关的淘宝部门可能也会影响绩效和奖金。那淘宝公司有责任吗？不管什么原因，公司没有保管好用户的信息，让罪犯有机可乘，公司是很有很大的责任的。

美国和欧洲在信息安全保护上比我们做的要更好一些，如果是在美国和欧洲，公司也会面临一大笔罚款。也希望国内的个人信息保护法律尽快完善起来。

爬虫学习者最常问的问题之一：这个能爬吗？下面我告诉大家不能爬的三条红线：
- 个人信息：本案就是和个人信息相关的，个人敏感信息是不能爬取和用来商业盈利的！
- 商业秘密：中国有句老话叫做：民不告，官不究。所有一些爬虫就算数据量大点，可能也没事。但如果你爬取别人的商业秘密，影响了别人的财路，人家肯定会告你，请你吃官司的。
- 国家机密：这个不用多说，触犯国家机密肯定不行，那后果很严重！
    
这3种数据一定不能爬，其他要具体情况具体分析，但**爬虫本身不违法，不用过于担心**。


## 二、案件2

![](https://img-blog.csdnimg.cn/2021071416515861.png?,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Z5ZnVnb3lmYQ==,size_16,color_FFFFFF,t_70)

据企查查披露的判决书显示。北京市朝阳区人民检察院以京朝检公诉刑诉[2020]2604号起诉书指控被告单位厦门房卖网络科技有限公司、被告人林x平、程x东、林x森犯非法获取计算机信息系统数据罪，于2020年12月2日向北京市朝阳区人民法院提起公诉。该案现已审理终结。

原告方诉求：被告单位厦门房麦网络科技有限公司（以下简称房麦公司）于2018年至2020年间，利用网络爬虫程序，采用破解验证码等手段非法获取北京某信息技术有限公司（实际经营地为北京市朝阳区酒仙桥北路甲10号院105楼，以下简称某公司）经营的某网站房产数据，经解密、加工、整理后供房麦公司的房产APP使用，**造成某公司网络资费、人力成本等经济损失人民币10万余元，并造成某公司相关费用受损共计人民币300余万元**。

被告人林x平为房麦公司总负责人，全面管理公司工作；被告人程x东为房麦公司技术部门负责人，主管数据爬取工作；被告人林x森为房麦公司爬虫工程师，负责破解某网站的反爬取措施。被告人林x平于2020年8月3日向公安机关投案，被告人程x东、林x森于同年7月22日被公安机关抓获归案。

经审理查明：
- 被告单位厦门房麦网络科技有限公司（以下简称房麦公司）于2015年6月成立，法定代表人为被告人林x平，公司成立后研发“推房神器”等APP。自2018年被告单位房麦公司，使用网络爬虫技术爬取北京某信息技术有限公司（实际经营地为北京市朝阳区酒仙桥北路甲10号院105楼，以下简称某公司）经营的“某”网站房产数据。

- 在某公司增加反爬取策略后，2019年10月至2020年7月间，被告单位房麦公司使用破解验证码、绕开挑战登录等方式破解某公司的反爬取措施，非法获取“某”网站的房源数据，并将非法获取的房产数据存放在自己的服务器中供“推房神器”APP调用，并向该APP用户收取会员费**盈利**。

- 自2019年10月至案发，被告单位房麦公司的上述行为给某公司造成直接损失共计人民币10万余元。被告人林x平作为被告单位房麦公司法定代表人全面管理公司工作，被告人程x东作为被告单位房麦公司技术部技术总监，在被告人林x平的指挥下具体安排非法获取房产数据的各项工作，被告人林x森作为被告单位房麦公司技术部工程师，其主要职责之一就是购买破解某公司验证码的程序，负责日常服务器上爬虫程序的维护。在案其他涉案人员申某、林x、董某等人均为被告单位房麦公司技术部工程师，在被告人程华东的指挥下，维护、使用爬虫技术非法获取某公司房产数据。


## 三、总结

网络爬虫是数据采集的一种形式，它可以由任意语言实现，Python，Java，Go实现原理基本一致，甚至 PHP 编写爬虫 Web 站在某段时间是仿站的主流手段。

数据采集的工作是从数据源获得数据信息。目前大家最熟识的就是网络爬虫，在具体些分为，网页爬虫和 APP 爬虫。

网页爬虫一般英文叫做 `web crawler`，一般是指用脚本工具来截取网页上的内容，本质是一种数据收集工具。

爬虫常见的网络抓包工具有：**Charles**，**Fiddler**，**appium**，**mitmproxy**，**Wireshark**。

工具没有最好，只有最熟悉与最适合你的，冲就完事儿了！

爬虫涉及的领域：
- 搜索引擎，例如百度。
- 垂直爬虫，例如抢票软件。
- 社交爬虫，例如微博爬虫。
- 自动化爬虫，例如评论器。
- 舆情监控，聚合数据。

学习爬虫，需要学会的 Python 技术栈与框架：
- Python基础数据结构和语法
- 函数封装，面向对象。
- 多线程，多进程，异步。
- 前端基础： HTML+CSS+JavaScript。
- 请求库：requests。
- 解析库：lxml，beautifulsoup，pyquery。
- 正则表达式 re 模块，可用于提取数据和数据清洗。
- 文件读写操作：将数据保存到本地，如txt，csv，excel里。
- 数据库：MySQL，MongoDB。
- 爬虫框架：Scrapy的使用。
  。。。。。。。。。。。。
 

常见的反爬手段：
- 识别请求头
- 访问频率限制
- 防盗链（用于图片反爬）
- 各种验证码，让你登录验证。
- IP验证；
- JS加密；
- 字体加密；


爬虫会触犯法律吗？
- 个人信息：个人敏感信息是不能爬取和用来商业盈利的！
- 商业秘密：中国有句老话叫做：民不告，官不究。所有一些爬虫就算数据量大点，可能也没事。但如果你爬取别人的商业秘密，影响了别人的财路，人家肯定会告你，请你吃官司的。
- 国家机密：这个不用多说，触犯国家机密肯定不行，那后果很严重！
- 对计算机信息系统功能或计算机信息系统中存储、处理或者传输的数据和应用程序进行破坏，就是违法。
- 爬取过程中，搞坏了别人的服务器，或者造成攻击，就是违法。
- 把别人的收费课件，课程，资料爬取过来，进行二次销售赚钱，就是违法。
- 对获取到的公司数据，进行销售获取收益，就是违法。


> 任何个人和组织不得窃取或者以其他非法方式获取个人信息，不得非法出售或者非法向他人提供个人信息；  
> 个人信息，是指以电子或者其他方式记录的能够单独或者与其他信息结合识别自然人个人身份的各种信息，包括但不限于自然人的姓名、出生日期、身份证件号码、个人生物识别信息、住址、电话号码等。

总结：学习爬虫，一定注意**不可爬取个人隐私信息，不要采用爬虫非法获利，不要爬取网站的付费内容**。爬取一些图片，免费小说啥的自己看看，爬取一些公开数据来学习数据分析与可视化，问题不大。


